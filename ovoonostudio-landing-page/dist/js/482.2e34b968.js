"use strict";(self["webpackChunkovoono_studio"]=self["webpackChunkovoono_studio"]||[]).push([[482],{9482:function(s,e,o){o.r(e),o.d(e,{default:function(){return Y}});var t=o(3396),a=o(7139),n=o(9242);const r={class:"dashboard"},d={key:0},l={key:1},i={key:2},u={key:3,class:"modal"},w={class:"modal-content"},c=(0,t._)("h3",null,"Change Password",-1),h={class:"form-group"},g=(0,t._)("label",{for:"oldPassword"},"Current Password",-1),p={class:"form-group"},m=(0,t._)("label",{for:"newPassword"},"New Password",-1),P={key:0,class:"success"},b={key:1,class:"error"},f={class:"main"},_={class:"content"},y=(0,t._)("h3",null,"Add New Post",-1),C={class:"form-group"},v=(0,t._)("label",{for:"title"},"Title",-1),k={class:"form-group"},M=(0,t._)("label",{for:"content"},"Content",-1),D={class:"form-group"},I=(0,t._)("label",{for:"image"},"Featured Image",-1),q={class:"form-group"},E=(0,t._)("label",{for:"thumbnail"},"Thumbnail",-1),U={class:"form-group"},z=(0,t._)("label",{for:"tags"},"Tags",-1),A={key:0,class:"success"},L={key:1,class:"error"},T=(0,t._)("button",{type:"submit",class:"button"},"Add Post",-1),V={class:"sidebar"},R=(0,t._)("h3",null,"Recent Posts",-1),N={key:0},S=["onClick"],$={key:1};function F(s,e,o,F,x,H){return(0,t.wg)(),(0,t.iD)("div",r,[null===H.username?((0,t.wg)(),(0,t.iD)("h2",d,"Loading...")):H.username?((0,t.wg)(),(0,t.iD)("h2",l,"Welcome, "+(0,a.zw)(H.username),1)):((0,t.wg)(),(0,t.iD)("h2",i,"Could not load username")),(0,t._)("button",{onClick:e[0]||(e[0]=(...s)=>H.logoutAndRedirect&&H.logoutAndRedirect(...s)),class:"button"},"Logout"),(0,t._)("button",{onClick:e[1]||(e[1]=s=>x.showChangePasswordModal=!0),class:"button"},"Change Password"),x.showChangePasswordModal?((0,t.wg)(),(0,t.iD)("div",u,[(0,t._)("div",w,[(0,t._)("span",{class:"close-button",onClick:e[2]||(e[2]=(...s)=>H.closeModal&&H.closeModal(...s))},"Ã—"),(0,t._)("form",{class:"change-password-form",onSubmit:e[6]||(e[6]=(0,n.iM)(((...s)=>H.handleChangePassword&&H.handleChangePassword(...s)),["prevent"]))},[c,(0,t._)("div",h,[g,(0,t.wy)((0,t._)("input",{id:"oldPassword",type:"password","onUpdate:modelValue":e[3]||(e[3]=s=>x.passwords.old=s),required:""},null,512),[[n.nr,x.passwords.old]])]),(0,t._)("div",p,[m,(0,t.wy)((0,t._)("input",{id:"newPassword",type:"password","onUpdate:modelValue":e[4]||(e[4]=s=>x.passwords.new=s),required:""},null,512),[[n.nr,x.passwords.new]])]),x.passwordMessage?((0,t.wg)(),(0,t.iD)("p",P,(0,a.zw)(x.passwordMessage),1)):(0,t.kq)("",!0),x.passwordError?((0,t.wg)(),(0,t.iD)("p",b,(0,a.zw)(x.passwordError),1)):(0,t.kq)("",!0),(0,t._)("button",{onClick:e[5]||(e[5]=(...s)=>H.openChangePasswordModal&&H.openChangePasswordModal(...s)),class:"button"},"Change Password")],32)])])):(0,t.kq)("",!0),(0,t._)("div",f,[(0,t._)("div",_,[y,(0,t._)("form",{class:"blog-form",onSubmit:e[12]||(e[12]=(0,n.iM)(((...s)=>H.addPost&&H.addPost(...s)),["prevent"]))},[(0,t._)("div",C,[v,(0,t.wy)((0,t._)("input",{id:"title","onUpdate:modelValue":e[7]||(e[7]=s=>x.newPost.title=s),required:""},null,512),[[n.nr,x.newPost.title]])]),(0,t._)("div",k,[M,(0,t.wy)((0,t._)("textarea",{id:"content","onUpdate:modelValue":e[8]||(e[8]=s=>x.newPost.content=s),required:""},null,512),[[n.nr,x.newPost.content]])]),(0,t._)("div",D,[I,(0,t._)("input",{id:"image",type:"file",onChange:e[9]||(e[9]=s=>H.onImageChange("featured",s)),accept:"image/*"},null,32)]),(0,t._)("div",q,[E,(0,t._)("input",{id:"thumbnail",type:"file",onChange:e[10]||(e[10]=s=>H.onImageChange("thumbnail",s)),accept:"image/*"},null,32)]),(0,t._)("div",U,[z,(0,t.wy)((0,t._)("input",{id:"tags","onUpdate:modelValue":e[11]||(e[11]=s=>x.newPost.tags=s)},null,512),[[n.nr,x.newPost.tags]])]),x.message?((0,t.wg)(),(0,t.iD)("p",A,(0,a.zw)(x.message),1)):(0,t.kq)("",!0),x.errorMessage?((0,t.wg)(),(0,t.iD)("p",L,(0,a.zw)(x.errorMessage),1)):(0,t.kq)("",!0),T],32)]),(0,t._)("div",V,[R,s.posts.length?((0,t.wg)(),(0,t.iD)("div",N,[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(s.posts,(s=>((0,t.wg)(),(0,t.iD)("div",{key:s.id},[(0,t._)("h3",null,(0,a.zw)(s.title),1),(0,t._)("button",{onClick:e=>H.navigateToEdit(s.id)},"Edit",8,S)])))),128))])):((0,t.wg)(),(0,t.iD)("div",$," No recent posts. "))])])])}o(7658);var x=o(65),H={data(){return{newPost:{title:"",content:"",featuredImage:null,thumbnail:null,tags:"",author:""},recentPosts:[],message:"",errorMessage:"",showChangePasswordModal:!1,passwords:{old:"",new:""},passwordMessage:"",passwordError:""}},mounted(){this.loadUser()},computed:{...(0,x.rn)(["posts"]),username(){return localStorage.getItem("username")}},methods:{...(0,x.nv)(["logout","createPost","loadUser","changePassword","fetchPosts"]),navigateToEdit(s){this.$router.push(`/posts/edit/${s}`)},logoutAndRedirect(){this.logout().then((()=>{this.$router.push("/login")}))},async handleChangePassword(){try{await this.changePassword({oldPassword:this.passwords.old,newPassword:this.passwords.new}),this.passwordMessage="Password changed successfully",this.passwordError="",this.passwords.old="",this.passwords.new="",this.showChangePasswordModal=!1,document.body.classList.remove("no-scroll")}catch(s){this.passwordError=s.message,this.passwordMessage=""}},openChangePasswordModal(){this.showChangePasswordModal=!0,document&&document.body&&document.body.classList.add("no-scroll")},closeModal(){this.showChangePasswordModal=!1,document&&document.body&&document.body.classList.remove("no-scroll")},addPost(){const s=new FormData;this.newPost.author=this.username,console.log(this.newPost.author),s.append("title",this.newPost.title),s.append("content",this.newPost.content),s.append("featuredImage",this.newPost.featuredImage),s.append("thumbnail",this.newPost.thumbnail),s.append("tags",this.newPost.tags),s.append("author",this.newPost.author),this.createPost(s).then((()=>{this.message="Post created successfully!",this.errorMessage="",this.newPost={title:"",content:"",featuredImage:null,thumbnail:null,tags:"",author:""}})).catch((s=>{this.errorMessage="An error occurred: "+s.message,this.message=""}))},onImageChange(s,e){"featured"===s?this.newPost.featuredImage=e.target.files[0]:"thumbnail"===s&&(this.newPost.thumbnail=e.target.files[0])}},async created(){await this.loadUser(),await this.fetchPosts()}},K=o(89);const W=(0,K.Z)(H,[["render",F]]);var Y=W}}]);
//# sourceMappingURL=482.2e34b968.js.map