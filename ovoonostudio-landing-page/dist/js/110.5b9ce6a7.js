"use strict";(self["webpackChunkovoono_studio"]=self["webpackChunkovoono_studio"]||[]).push([[110],{2110:function(s,e,o){o.r(e),o.d(e,{default:function(){return Y}});var a=o(3396),t=o(7139),n=o(9242);const r={class:"dashboard"},d={key:0},l={key:1},i={key:2},u={key:3,class:"modal"},w={class:"modal-content"},c=(0,a._)("h3",null,"Change Password",-1),g={class:"form-group"},h=(0,a._)("label",{for:"oldPassword"},"Current Password",-1),p={class:"form-group"},m=(0,a._)("label",{for:"newPassword"},"New Password",-1),P={key:0,class:"success"},b={key:1,class:"error"},f={class:"main"},_={class:"content"},y=(0,a._)("h3",null,"Add New Post",-1),C={class:"form-group"},v=(0,a._)("label",{for:"title"},"Title",-1),k={class:"form-group"},M=(0,a._)("label",{for:"content"},"Content",-1),D={class:"form-group"},I=(0,a._)("label",{for:"image"},"Featured Image",-1),q={class:"form-group"},U=(0,a._)("label",{for:"thumbnail"},"Thumbnail",-1),A={class:"form-group"},z=(0,a._)("label",{for:"tags"},"Tags",-1),E={key:0,class:"success"},L={key:1,class:"error"},V=(0,a._)("button",{type:"submit",class:"button"},"Add Post",-1),R={class:"sidebar"},N=(0,a._)("h3",null,"Recent Posts",-1),S={key:0},T={key:1};function F(s,e,o,F,x,H){return(0,a.wg)(),(0,a.iD)("div",r,[null===H.username?((0,a.wg)(),(0,a.iD)("h2",d,"Loading...")):H.username?((0,a.wg)(),(0,a.iD)("h2",l,"Welcome, "+(0,t.zw)(H.username),1)):((0,a.wg)(),(0,a.iD)("h2",i,"Could not load username")),(0,a._)("button",{onClick:e[0]||(e[0]=(...s)=>H.logoutAndRedirect&&H.logoutAndRedirect(...s)),class:"button"},"Logout"),(0,a._)("button",{onClick:e[1]||(e[1]=s=>x.showChangePasswordModal=!0),class:"button"},"Change Password"),x.showChangePasswordModal?((0,a.wg)(),(0,a.iD)("div",u,[(0,a._)("div",w,[(0,a._)("span",{class:"close-button",onClick:e[2]||(e[2]=(...s)=>H.closeModal&&H.closeModal(...s))},"Ã—"),(0,a._)("form",{class:"change-password-form",onSubmit:e[6]||(e[6]=(0,n.iM)(((...s)=>H.handleChangePassword&&H.handleChangePassword(...s)),["prevent"]))},[c,(0,a._)("div",g,[h,(0,a.wy)((0,a._)("input",{id:"oldPassword",type:"password","onUpdate:modelValue":e[3]||(e[3]=s=>x.passwords.old=s),required:""},null,512),[[n.nr,x.passwords.old]])]),(0,a._)("div",p,[m,(0,a.wy)((0,a._)("input",{id:"newPassword",type:"password","onUpdate:modelValue":e[4]||(e[4]=s=>x.passwords.new=s),required:""},null,512),[[n.nr,x.passwords.new]])]),x.passwordMessage?((0,a.wg)(),(0,a.iD)("p",P,(0,t.zw)(x.passwordMessage),1)):(0,a.kq)("",!0),x.passwordError?((0,a.wg)(),(0,a.iD)("p",b,(0,t.zw)(x.passwordError),1)):(0,a.kq)("",!0),(0,a._)("button",{onClick:e[5]||(e[5]=(...s)=>H.openChangePasswordModal&&H.openChangePasswordModal(...s)),class:"button"},"Change Password")],32)])])):(0,a.kq)("",!0),(0,a._)("div",f,[(0,a._)("div",_,[y,(0,a._)("form",{class:"blog-form",onSubmit:e[12]||(e[12]=(0,n.iM)(((...s)=>H.addPost&&H.addPost(...s)),["prevent"]))},[(0,a._)("div",C,[v,(0,a.wy)((0,a._)("input",{id:"title","onUpdate:modelValue":e[7]||(e[7]=s=>x.newPost.title=s),required:""},null,512),[[n.nr,x.newPost.title]])]),(0,a._)("div",k,[M,(0,a.wy)((0,a._)("textarea",{id:"content","onUpdate:modelValue":e[8]||(e[8]=s=>x.newPost.content=s),required:""},null,512),[[n.nr,x.newPost.content]])]),(0,a._)("div",D,[I,(0,a._)("input",{id:"image",type:"file",onChange:e[9]||(e[9]=s=>H.onImageChange("featured",s)),accept:"image/*"},null,32)]),(0,a._)("div",q,[U,(0,a._)("input",{id:"thumbnail",type:"file",onChange:e[10]||(e[10]=s=>H.onImageChange("thumbnail",s)),accept:"image/*"},null,32)]),(0,a._)("div",A,[z,(0,a.wy)((0,a._)("input",{id:"tags","onUpdate:modelValue":e[11]||(e[11]=s=>x.newPost.tags=s)},null,512),[[n.nr,x.newPost.tags]])]),x.message?((0,a.wg)(),(0,a.iD)("p",E,(0,t.zw)(x.message),1)):(0,a.kq)("",!0),x.errorMessage?((0,a.wg)(),(0,a.iD)("p",L,(0,t.zw)(x.errorMessage),1)):(0,a.kq)("",!0),V],32)]),(0,a._)("div",R,[N,x.recentPosts.length?((0,a.wg)(),(0,a.iD)("div",S,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(x.recentPosts,(s=>((0,a.wg)(),(0,a.iD)("div",{key:s.id})))),128))])):((0,a.wg)(),(0,a.iD)("div",T," No recent posts. "))])])])}o(7658);var x=o(5252),H={data(){return{newPost:{title:"",content:"",featuredImage:null,thumbnail:null,tags:"",author:""},recentPosts:[],message:"",errorMessage:"",showChangePasswordModal:!1,passwords:{old:"",new:""},passwordMessage:"",passwordError:""}},mounted(){this.loadUser()},computed:{username(){return localStorage.getItem("username")}},methods:{...(0,x.nv)(["logout","createPost","loadUser","changePassword"]),logoutAndRedirect(){this.logout().then((()=>{this.$router.push("/login")}))},async handleChangePassword(){try{await this.changePassword({oldPassword:this.passwords.old,newPassword:this.passwords.new}),this.passwordMessage="Password changed successfully",this.passwordError="",this.passwords.old="",this.passwords.new="",this.showChangePasswordModal=!1,document.body.classList.remove("no-scroll")}catch(s){this.passwordError=s.message,this.passwordMessage=""}},openChangePasswordModal(){this.showChangePasswordModal=!0,document&&document.body&&document.body.classList.add("no-scroll")},closeModal(){this.showChangePasswordModal=!1,document&&document.body&&document.body.classList.remove("no-scroll")},addPost(){const s=new FormData;this.newPost.author=this.username,console.log(this.newPost.author),s.append("title",this.newPost.title),s.append("content",this.newPost.content),s.append("featuredImage",this.newPost.featuredImage),s.append("thumbnail",this.newPost.thumbnail),s.append("tags",this.newPost.tags),s.append("author",this.newPost.author),this.createPost(s).then((()=>{this.message="Post created successfully!",this.errorMessage="",this.newPost={title:"",content:"",featuredImage:null,thumbnail:null,tags:"",author:""}})).catch((s=>{this.errorMessage="An error occurred: "+s.message,this.message=""}))},onImageChange(s,e){"featured"===s?this.newPost.featuredImage=e.target.files[0]:"thumbnail"===s&&(this.newPost.thumbnail=e.target.files[0])}}},K=o(89);const W=(0,K.Z)(H,[["render",F]]);var Y=W}}]);
//# sourceMappingURL=110.5b9ce6a7.js.map